(this["webpackJsonpwhatsapp-clone-web"]=this["webpackJsonpwhatsapp-clone-web"]||[]).push([[0],{70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},73:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c.n(a),n=c(30),o=c.n(n),r=(c(70),c(16)),i=(c(71),c(72),c(104)),j=c(58),d=c.n(j),l=c(57),h=c.n(l),b=c(43),u=c.n(b),m=c(44),O=c.n(m),p=(c(73),c(37)),x=p.a.initializeApp({apiKey:"AIzaSyCcXyfDxVLNDORbYEQ72kKLd7LFG32-CJA",authDomain:"whatsapp-clone-4bd23.firebaseapp.com",projectId:"whatsapp-clone-4bd23",storageBucket:"whatsapp-clone-4bd23.appspot.com",messagingSenderId:"984971410528",appId:"1:984971410528:web:66f9b7605bba80f3ca9705",measurementId:"G-VNM08P8L0M"}),f=x.firestore(),v=x.auth(),g=new p.a.auth.GoogleAuthProvider,_=c(33),N=c(4);var w=function(e){var t,c=e.addChat,s=e.id,n=e.name,o=Object(a.useState)(""),j=Object(r.a)(o,2),d=j[0],l=j[1],h=Object(a.useState)(""),b=Object(r.a)(h,2),u=b[0],m=b[1];return Object(a.useEffect)((function(){l(Math.floor(5e3*Math.random()))}),[]),Object(a.useEffect)((function(){s&&f.collection("rooms").doc(s).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return m(e.docs.map((function(e){return e.data()})))}))}),[s]),c?Object(N.jsx)("div",{onClick:function(){var e=prompt("Enter A name");e&&f.collection("rooms").add({name:e})},className:"chats",children:Object(N.jsx)("h2",{children:"Add New Chat"})}):Object(N.jsx)(_.b,{to:"/rooms/".concat(s),children:Object(N.jsxs)("div",{className:"chats",children:[Object(N.jsx)(i.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg")}),Object(N.jsxs)("div",{className:"chats__info",children:[Object(N.jsx)("h3",{children:n}),Object(N.jsx)("p",{children:null===(t=u[0])||void 0===t?void 0:t.message})]})]})})},S=Object(a.createContext)(),y=function(e){var t=e.reducer,c=e.initialState,s=e.children;return Object(N.jsx)(S.Provider,{value:Object(a.useReducer)(t,c),children:s})},C=function(){return Object(a.useContext)(S)};var k=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1],n=C(),o=Object(r.a)(n,2),j=o[0].user;return o[1],Object(a.useEffect)((function(){var e=f.collection("rooms").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(N.jsxs)("div",{className:"sidebar",children:[Object(N.jsxs)("div",{className:"sidebar__header",children:[Object(N.jsx)(i.a,{src:null===j||void 0===j?void 0:j.photoURL}),Object(N.jsxs)("div",{className:"sidebar__headerright",children:[Object(N.jsx)(h.a,{}),Object(N.jsx)(d.a,{}),Object(N.jsx)(u.a,{})]})]}),Object(N.jsx)("div",{className:"siebar__search",children:Object(N.jsxs)("div",{className:"sidebar__searchcontainer",children:[Object(N.jsx)(O.a,{}),Object(N.jsx)("input",{placeholder:"chats",type:"text"})]})}),Object(N.jsxs)("div",{className:"sidebar__chhatsGroups",children:[Object(N.jsx)(w,{addChat:!0}),c.map((function(e){return Object(N.jsx)(w,{id:e.id,name:e.data.name},e.id)}))]})]})},A=(c(85),c(61)),E=c.n(A),D=c(59),I=c.n(D),W=c(60),M=c.n(W),T=c(62),B=c.n(T),G=c(11);var L=function(){var e,t,c=Object(a.useState)(""),s=Object(r.a)(c,2),n=s[0],o=s[1],j=Object(G.f)().roomid,d=Object(a.useState)(""),l=Object(r.a)(d,2),h=l[0],b=l[1],m=Object(a.useState)([]),x=Object(r.a)(m,2),v=x[0],g=x[1],_=C(),w=Object(r.a)(_,2),S=w[0].user;return w[1],Object(a.useEffect)((function(){j&&(f.collection("rooms").doc(j).onSnapshot((function(e){return b(e.data().name)})),f.collection("rooms").doc(j).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return g(e.docs.map((function(e){return e.data()})))})))}),[j]),Object(N.jsxs)("div",{className:"chatroom",children:[Object(N.jsxs)("div",{className:"chatroom__header",children:[Object(N.jsx)(i.a,{}),Object(N.jsxs)("div",{className:"chatroom__headerinfoleft",children:[Object(N.jsx)("h3",{children:h}),Object(N.jsxs)("p",{children:["last seen"," ",new Date(null===(e=v[v.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(N.jsxs)("div",{className:"chatroom__header__inforight",children:[Object(N.jsx)(O.a,{}),Object(N.jsx)(I.a,{}),Object(N.jsx)(u.a,{})]})]}),Object(N.jsx)("div",{className:"chatroom__body",children:v.map((function(e){var t;return Object(N.jsxs)("p",{className:"chatroom__message ".concat(e.name===S.displayName&&"chatroom__messagerecierver"),children:[Object(N.jsx)("span",{className:"chatroom__username",children:e.name}),e.message,Object(N.jsx)("span",{className:"chatroom__messagetimestamp ",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(N.jsxs)("div",{className:"chatroom__footer",children:[Object(N.jsx)(M.a,{}),Object(N.jsxs)("form",{children:[Object(N.jsx)("input",{value:n,onChange:function(e){return o(e.target.value)},placeholder:"Type your message here"}),Object(N.jsx)("button",{onClick:function(e){e.preventDefault(),f.collection("rooms").doc(j).collection("messages").add({message:n,name:S.displayName,timestamp:p.a.firestore.FieldValue.serverTimestamp()}),o("")},type:"submit",children:Object(N.jsx)(E.a,{})})]}),Object(N.jsx)(B.a,{})]})]})},R=(c(86),c(103)),U=c(50),P="SET_USER",J=function(e,t){switch(console.log(t),t.type){case P:return Object(U.a)(Object(U.a)({},e),{},{user:t.user});default:return e}},V=c(63),z=c.n(V);c(87);var F=function(){return Object(N.jsx)("div",{children:Object(N.jsxs)("div",{className:"footer",children:[Object(N.jsx)("a",{className:"",href:"https://github.com/kshitij3188",children:Object(N.jsx)(z.a,{className:"github__logo"})}),Object(N.jsx)("p",{children:Object(N.jsx)("strong",{children:"Made Using React"})})]})})};var K=function(){var e=C(),t=Object(r.a)(e,2),c=(t[0].user,t[1]);return Object(N.jsx)("div",{className:"login",children:Object(N.jsxs)("div",{className:"login__body",children:[Object(N.jsx)("img",{alt:"whats app logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/800px-WhatsApp.svg.png"}),Object(N.jsx)("div",{className:"login__text",children:Object(N.jsx)("h1",{children:"Welcome To WhatsApp Clone"})}),Object(N.jsx)(R.a,{onClick:function(){v.signInWithPopup(g).then((function(e){c({type:P,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"SignIn with Google"}),Object(N.jsx)(F,{})]})})};var Q=function(){var e=C(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(N.jsx)("div",{className:"app",children:c?Object(N.jsx)("div",{className:"app__container",children:Object(N.jsxs)(_.a,{children:[Object(N.jsx)(k,{}),Object(N.jsxs)(G.c,{children:[Object(N.jsx)(G.a,{path:"/rooms/:roomid",children:Object(N.jsx)(L,{})}),Object(N.jsx)(G.a,{path:"/",children:Object(N.jsx)(L,{})})]})]})}):Object(N.jsx)(K,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(y,{initialState:{user:null},reducer:J,children:Object(N.jsx)(Q,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[88,1,2]]]);
//# sourceMappingURL=main.20da32a7.chunk.js.map